{# Opnemen van de "Main" file #}
{% extends "main.html.twig" %}

{% block header %}

{% endblock %}


{# nu de block content op in de main pagina vullen #}
{% block content %}
    {# Dit is commentaar #}

    {# Print #}

{# Loop #}
    
    <div>
    {% for record in data %}
        <div class="col-md-5 recipe">
            <img src="assets/img/gerechten/{{ record.image }}.jpg" />

            <section>
                <header>
                    <h3>{{ record.title }}</h3>
                    <div class="rating">
                        {% for i in 1..5 %}
                            {% if i <= record.rating %}
                                <span class="fa fa-star checked" data-value={{i}}></span>
                            {% else %}
                                <span class="fa fa-star" data-value={{i}}></span>
                            {% endif %}
                        {% endfor %}
                    </div>
                </header>
                
                <p>{{ record.shortDescription}}</p>
                <footer>
                    <a href="https://google.com">Smullen!</a>
                    <span>4</span>
                    <span>â‚¬{{ record.price}}</span>
                    <span>{{ record.calories}}</span>
                </footer>
                
            </section>

            
            
            {# sub-loop #}
            <ul>
                {% for ingr in record.ingredienten %}
                    <li>
                        <span {% if ingr.id < 2 %}style='color: #F00'{% endif %}>{{ ingr.naam }}</span>

                        {# if #}
                        {%  if ingr.id == 3 %}
                            <strong>Dit is ID 3!</strong>
                        {%  endif  %}
                    </li>
                {% endfor %}
            </ul>
        </div>
    {% endfor %}
    <ul>
     {# Dump #}
       <pre>
        {#{ dump(data) }#}
       </pre>
    <script>
        $(document).ready(function () {
            $(".fa-star").click(function () {
                const value = $(this).attr('data-value');
                console.log(this);

                /// Clear all the checked stars 
                $(this).parent().children().removeClass('checked');

                $(this).parent().children().each((index, elem) => { 
                            const ratingStar = $(elem).attr('data-value');
                            if (ratingStar <= value) {
                                $(elem).addClass('checked');
                            }
                        });
            })
        })    
    </script>

{% endblock %}

